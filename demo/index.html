<html>
  <head>
    <script src='./index.js'></script>
    <link href='./index.css' rel='stylesheet' type='text/css' />

    <body>
      <div id='charity-base-form'></div>
      <div id='charity-base-search'></div>
      <form>
        <input id='charity-base-input-id' type='text' placeholder='Charity ID' />
        <input id='charity-base-input-name' type='text' placeholder='Charity Name' />
      </form>
      <div id='errors' style="color: red;"></div>
      <script>
      !function() {
        let apiKey
        try {
          apiKey = window.location.search.split('api_key=')[1].split('&')[0]
        } catch(e) {
          document.getElementById('errors').innerHTML = "Failed to find 'api_key' in query string"
        }
        var cb = CharityBase(apiKey)
        // var formElement = document.getElementById('charity-base-form')
        // cb.renderForm(formElement, {}, function() {
        //   console.log('form rendered')
        // })
        var searchElement = document.getElementById('charity-base-search')
        cb.renderSearch(searchElement, {
          onSelect: function(x) {
            document.getElementById('charity-base-input-id').value = x.value
            document.getElementById('charity-base-input-name').value = x.label
          }
        }, function() {
          console.log('search rendered')
        })
      }()
      </script>
    </body>
  </head>
  <body>
    <h1></h1>
  </body>
</html>